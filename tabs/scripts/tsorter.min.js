var tsorter=function(){"use strict";var e,t,r,n=!!document.addEventListener;return Object.create||(Object.create=function(e){var t=function(){return void 0};return t.prototype=e,new t}),t=function(e,t,r){n?e.addEventListener(t,r,!1):e.attachEvent("on"+t,r)},r=function(e,t,r){n?e.removeEventListener(t,r,!1):e.detachEvent("on"+t,r)},e={getCell:function(e){var t=this;return t.trs[e].cells[t.column]},sort:function(e){var t=this,r=e.target;t.column=r.cellIndex,t.get=t.getAccessor(r.getAttribute("data-tsorter")),t.prevCol===t.column?(r.className="ascend"!==r.className?"ascend":"descend",t.reverseTable()):(r.className="ascend",-1!==t.prevCol&&"exc_cell"!==t.ths[t.prevCol].className&&(t.ths[t.prevCol].className=""),t.quicksort(0,t.trs.length)),t.prevCol=t.column},getAccessor:function(e){var t=this,r=t.accessors;if(r&&r[e])return r[e];switch(e){case"link":return function(e){return t.getCell(e).firstChild.firstChild.nodeValue};case"input":return function(e){return t.getCell(e).firstChild.value};case"numeric":return function(e){var r=t.getCell(e).firstChild.nodeValue;return r=r.replace(/,/g,""),parseFloat(r,10)};default:return function(e){return t.getCell(e).firstChild.nodeValue}}},exchange:function(e,t){var r,n=this,s=n.tbody,c=n.trs;e===t+1?s.insertBefore(c[e],c[t]):t===e+1?s.insertBefore(c[t],c[e]):(r=s.replaceChild(c[e],c[t]),c[e]?s.insertBefore(r,c[e]):s.appendChild(r))},reverseTable:function(){var e,t=this;for(e=1;e<t.trs.length;e++)t.tbody.insertBefore(t.trs[e],t.trs[0])},quicksort:function(e,t){var r,n,s,c=this;if(!(e+1>=t)){if(t-e===2)return void(c.get(t-1)>c.get(e)&&c.exchange(t-1,e));for(r=e+1,n=t-1,c.get(e)>c.get(r)&&c.exchange(r,e),c.get(n)>c.get(e)&&c.exchange(e,n),c.get(e)>c.get(r)&&c.exchange(r,e),s=c.get(e);;){for(n--;s>c.get(n);)n--;for(r++;c.get(r)>s;)r++;if(r>=n)break;c.exchange(r,n)}c.exchange(e,n),t-n>n-e?(c.quicksort(e,n),c.quicksort(n+1,t)):(c.quicksort(n+1,t),c.quicksort(e,n))}},init:function(e,r,n){var s,c=this;for("string"==typeof e&&(e=document.getElementById(e)),c.table=e,c.ths=e.getElementsByTagName("th"),c.tbody=e.tBodies[0],c.trs=c.tbody.getElementsByTagName("tr"),c.prevCol=r&&r>0?r:-1,c.accessors=n,c.boundSort=c.sort.bind(c),s=0;s<c.ths.length;s++)t(c.ths[s],"click",c.boundSort)},destroy:function(){var e,t=this;if(t.ths)for(e=0;e<t.ths.length;e++)r(t.ths[e],"click",t.boundSort)}},{create:function(t,r,n){var s=Object.create(e);return s.init(t,r,n),s}}}();